#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h> // Instalar esta libreria y sus dependencias


#define SDA_OLED 4  // Serial Data de pantalla OLED
#define SCL_OLED 15 // Serial Clock de pantalla OLED
#define RESET_OLED 16 
#define LED_PIN 25  // Pin conectado al led de la placa
#define READ_PIN 12 // Pin de lectura

bool valor_anterior; // Variable de monitoreo

Adafruit_SSD1306 display(128, 64, &Wire,RESET_OLED); // objeto display para control de OLED 128x64
#include <Wire.h>
#include <Adafruit_SSD1306.h> // Instalar esta libreria y sus dependencias

#define SDA_OLED 4  // Serial Data de pantalla OLED
#define SCL_OLED 15 // Serial Clock de pantalla OLED
#define RESET_OLED 16 
#define LED_PIN 25  // Pin conectado al led de la placa
#define READ_PIN 13 // Pin de lectura


static const uint8_t image_data_Image[1024] = {
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x0f, 0xff, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x0f, 0xff, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x07, 0xff, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x07, 0x7f, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x00, 0xff, 0x80, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x9e, 0x40, 0x00, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf9, 0xfe, 0x40, 0x00, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x89, 0xff, 0x40, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x7f, 0xff, 0xff, 0xff, 0xc0, 0x0f, 0xff, 0x6f, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x0f, 0xff, 0x14, 0x0f, 0xff, 0x60, 0x0f, 
    0xfb, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xbf, 0x04, 0xff, 0x67, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xcc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xc7, 0xff, 0x7f, 0xff, 
    0xfd, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xc7, 0xff, 0x3f, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xe7, 0xfc, 0x3f, 0xff, 
    0xee, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x7f, 0xc0, 0x00, 0x07, 0xff, 0xf7, 0x1c, 0xbf, 0xff, 
    0xf7, 0xff, 0xff, 0x80, 0x00, 0x00, 0x00, 0xff, 0xff, 0xc0, 0x03, 0xff, 0xf7, 0x9d, 0xbf, 0xff, 
    0xf9, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xf8, 0x03, 0xff, 0xf7, 0x1c, 0xbf, 0xff, 
    0xfc, 0xff, 0xc8, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xfc, 0x01, 0xff, 0xf7, 0x98, 0xbf, 0xff, 
    0xfe, 0x60, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xfe, 0x00, 0x7f, 0xf7, 0x18, 0x38, 0x00, 
    0x81, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0x00, 0x3f, 0xf3, 0x80, 0x30, 0x3f, 
    0x81, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0x00, 0x1f, 0xe7, 0x80, 0x1f, 0xff, 
    0x81, 0x30, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0x00, 0x1f, 0x07, 0x80, 0x1f, 0xff, 
    0x80, 0x4c, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80, 0x1f, 0xff, 0x80, 0x5f, 0xff, 
    0xbf, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xc0, 0x03, 0xff, 0x7f, 0xef, 0xff, 
    0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xfc, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 
    0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xfe, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 
    0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x7f, 0xff, 0xff, 0xff, 
    0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xff, 
    0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xff, 
    0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x1f, 0xef, 0xff, 0xff, 
    0xff, 0xe6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x0f, 0xcf, 0xff, 0xff, 
    0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf1, 0xe0, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 
    0x7f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf3, 0xe6, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x03, 0xc3, 0xf2, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xe7, 0xfb, 0xc0, 0x02, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xfc, 0x18, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xcf, 0xf9, 0xee, 0x07, 0x80, 0x0f, 0xff, 0xff, 0xff, 
    0xf8, 0x08, 0x00, 0x00, 0x00, 0xff, 0xff, 0xdf, 0xfc, 0x3f, 0xc7, 0xc0, 0x07, 0xff, 0xff, 0xff, 
    0xee, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xfe, 0x0f, 0xf0, 0xc0, 0x07, 0xff, 0xff, 0xff, 
    0xfc, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x7f, 0xff, 0xfe, 0x00, 0x00, 0xc0, 0x00, 0xff, 0xff, 0xff, 
    0xfc, 0x00, 0x00, 0x00, 0x00, 0x20, 0x7e, 0x3f, 0xfe, 0x3c, 0x01, 0xc0, 0x03, 0xff, 0xff, 0xfb, 
    0xfc, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0x38, 0x40, 0x7f, 0xc1, 0x80, 0x07, 0xff, 0xff, 0xfd, 
    0xfc, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0x90, 0x00, 0x7f, 0xff, 0x80, 0x0f, 0xf7, 0xff, 0xff, 
    0xfc, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xc0, 0x00, 0x7f, 0xff, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0x64, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 0x00, 0x3f, 0xfe, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xc0, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 0xf8, 0x3f, 0xfe, 0x00, 0x13, 0xff, 0xff, 0xff, 
    0xfa, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xfc, 0x00, 0xff, 0xfc, 0x00, 0x07, 0xff, 0xff, 0xff, 
    0xfc, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0x00, 0x00, 0x7f, 0xfc, 0x00, 0x1f, 0xff, 0xff, 0xff, 
    0xfe, 0x00, 0x00, 0x00, 0x01, 0xff, 0xf0, 0x00, 0x00, 0x03, 0xf8, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xe4, 0x00, 0x00, 0x00, 0x03, 0xff, 0xe0, 0x00, 0x00, 0x00, 0xf8, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xfc, 0x00, 0x00, 0xf0, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xe0, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x80, 0x00, 0x00, 0x60, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xc0, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 
    0xc0, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 
    0xc0, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0x80, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x80, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 
    0xe0, 0x20, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 
    0xe0, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 
    0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 
    0xc2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x90, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 
    0xe7, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 
    0xf1, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x04, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 
    0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0x6f, 
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf1, 0x00, 0x80, 0x00, 0x00, 0x00, 0x1f, 0xbf, 
    0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xc3, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xef
};

void setup(){
  Serial.begin(115200);// Inicializaci칩n de puerto Serial
  Serial.println("INICIANDO I2C"); // mensaje de control de Inicio Puerto I2C OLED
  IniciarPantalla(); // Llamado a funci칩n de iniciar el objeto OLED 

  display.clearDisplay();
  
  // Draw bitmap on the screen
  display.drawBitmap(0, 0, image_data_Image, 128, 64, 1);
  display.display();
}


void IniciarPantalla(){
  pinMode(RESET_OLED, OUTPUT);
  digitalWrite(RESET_OLED, LOW);
  delay(20);
  digitalWrite(RESET_OLED, HIGH);
  Wire.begin(SDA_OLED, SCL_OLED); // Iniciar Objeto Wire (I2C) anteriormente referenciado por display
  if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3c)) { // Se asigna el tipo correcto de OLED y direcci칩n I2C
    Serial.println("Problema al iniciar OLED"); 
    while (true);
  }
  display.setTextSize(1);// tama침o minimo de texto
  display.setTextColor(WHITE,BLACK);// Letras en blanco fondo negro
}

void loop(){
}